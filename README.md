# Task List Language

This repository contains Langium grammar for TaskList language implemented in [GLSP blueprints](https://github.com/eclipse-glsp/glsp-examples/tree/master/project-templates/node-json-theia).

The idea is to connect Langium-based LS to GLSP server as [Source Model Server](https://www.eclipse.org/glsp/documentation/integrations/) into [tasklist-theia-glsp](https://github.com/Crystal-VPL/tasklist-theia-glsp).

## Environment

This project is built under Node v16.13.1.

## Plans and ideas

This language is supposed to be connected to GLSP, so need to identify corresponding graphical and textual elements.
In the example, demoed here [Langium + Sirius Web = Heart](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=&ved=2ahUKEwjtjeHY1Mz9AhVUlFwKHRICDKQQwqsBegQIFxAE&url=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3Dt-BISMWMtwc&usg=AOvVaw2oh1_5SVKkUAzkYOwXrWvU), they used so called "Semantic ID" to locate an element bidirectionally.

Therefore, ðŸ’¡ Langium LS should enrich AST with some identifier (i.e., semanticID) before supplying it to GLSP as Source Model.
By default, element `name` can be used. However, there can be cases when element name is only unique within a scope. In this case LS service, that communicates with GLSP will be responsible to generate SemanticID for AST element. Actually, these semanticIDs don't have to be persistent, they only must stay the same during open session from GLSP to LS. But if so, it will be tough to reinitiate a connection between LS and GLSP (with a diagram nodes coordinates stored), because you will have to rely on a fragile information, such as element index in the list of AST elements to reassign semantic ID from graphical nodes to just-loaded AST nodes.

Therefore, ðŸ’¡ SourceModel should be defined separately from the autogenerated AST (e.g., to have semantic IDs added, and the model itself to be adopted if needed for GModel), and Langium service should do bidirectional mapping. This is done in order not to overload the textual DSL user with irrelevant not language-domain information.

Another plan ðŸ“ƒ is to learn how to test Langium-based LS and services

## Thoughts for the future

- Formatter will be needed anyway, though, to serialize AST itself in the formatted manner from the beginning.
- When Langium LS service, responsible for serializing AST back to the source file, saves the file, it should apply formatting on it;
- Since to refer Task, one should specify Task `name`, LS service will probably have to generate Task `name`, when the user creates new task from the diagram view.
